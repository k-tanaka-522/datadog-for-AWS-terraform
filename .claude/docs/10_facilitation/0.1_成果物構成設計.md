# 成果物構成設計

## 目的

aiDevフレームワークにおける成果物（docs/、src/、infra/、tests/）の構成を定義し、エージェント定義とテンプレートの整合性を確保する。

**整合性ルール**:
1. エージェント定義の出力先 = この設計書の構成
2. テンプレートファイル = この設計書の構成に準拠
3. 矛盾が発生したら、この設計書を正とする

---

## docs/ ディレクトリ構成（標準）

```
docs/
├── requirements/                    # PM担当 - 要件定義
│   └── 01_要件定義書.md
│
├── 03_アプリケーション設計/          # App-Architect担当
│   ├── 01_基本設計/
│   │   ├── 01_アーキテクチャ概要.md
│   │   ├── 02_コンポーネント設計.md
│   │   ├── 03_データモデル.md
│   │   ├── 04_API設計.md
│   │   ├── 05_セキュリティ設計.md
│   │   └── 06_実装方針.md
│   └── 02_詳細設計/
│       ├── 01_モジュール詳細設計.md
│       ├── 02_クラス設計.md
│       ├── 03_シーケンス図.md
│       └── 04_状態遷移図.md
│
├── 04_インフラ設計/                  # Infra-Architect担当
│   ├── 01_基本設計/
│   │   ├── 01_システム構成図.md
│   │   ├── 02_ネットワーク設計.md
│   │   ├── 03_セキュリティ設計.md
│   │   ├── 04_可用性設計.md
│   │   ├── 05_監視設計.md
│   │   ├── 06_バックアップ設計.md
│   │   ├── 07_DR設計.md
│   │   ├── 08_コスト見積.md
│   │   ├── 09_環境設計.md
│   │   ├── 10_IaC方針.md
│   │   ├── 11_CI/CD設計.md
│   │   ├── 12_移行計画.md
│   │   └── 13_運用設計.md
│   └── 02_詳細設計/
│       ├── 01_リソース詳細設計.md
│       ├── 02_パラメータシート.md
│       └── 03_構築手順書.md
│
└── 05_テスト/                        # QA担当
    ├── テスト計画書.md
    ├── テストケース/
    └── テスト結果報告書.md
```

---

## エージェント ↔ 成果物 対応表

| エージェント | 担当成果物 | 参照テンプレート |
|------------|----------|----------------|
| PM | docs/requirements/ | 2.2.x |
| App-Architect | docs/03_アプリケーション設計/ | 2.3.5, 2.3.6 |
| Infra-Architect | docs/04_インフラ設計/ | 2.3.5, 2.3.6 |
| Coder | src/, prototypes/ | 2.4.x |
| QA | tests/, docs/05_テスト/ | 2.5.x |
| SRE | infra/ (IaC実装) | 2.6.x |
| Designer | デザイン成果物 | - |
| Consultant | ビジネス助言（成果物なし） | - |

---

## src/ ディレクトリ構成（参考）

プロジェクトの技術スタックに応じて変動するが、基本的な構成例：

```
src/
├── app/                    # アプリケーションコード
│   ├── main.py            # エントリーポイント（例）
│   ├── api/               # APIエンドポイント
│   ├── models/            # データモデル
│   ├── services/          # ビジネスロジック
│   └── utils/             # ユーティリティ
├── Dockerfile
└── requirements.txt
```

**重要**: 実装方針（06_実装方針.md）に具体的な構成を記載すること。

---

## infra/ ディレクトリ構成（参考）

IaCツールに応じて変動するが、基本的な構成例：

```
infra/
├── cloudformation/        # CloudFormationテンプレート
│   ├── network.yaml
│   ├── database.yaml
│   └── compute.yaml
├── terraform/             # Terraformモジュール（選択時）
└── scripts/               # デプロイスクリプト
```

---

## tests/ ディレクトリ構成（参考）

```
tests/
├── unit/                  # 単体テスト（Coder責務）
├── integration/           # 結合テスト（QA責務）
├── e2e/                   # E2Eテスト（QA責務）
└── performance/           # 性能テスト（QA+SRE責務）
```

---

## 整合性チェックリスト

エージェント定義・テンプレート修正時に確認：

- [ ] この設計書の構成と一致しているか
- [ ] 出力先パスが正確か
- [ ] ファイル名が一致しているか
- [ ] エージェント責務が明確か

---

**作成日**: 2025-12-12
**対象**: 全エージェント
**重要度**: 最重要（整合性の基準）
**関連ドキュメント**:
- `.claude/agents/*/AGENT.md` - 各エージェント定義
- `.claude/docs/10_facilitation/2.3_設計フェーズ/2.3.5_製造物_基本設計書構成.md`
- `.claude/docs/10_facilitation/2.3_設計フェーズ/2.3.6_製造物_詳細設計書構成.md`
