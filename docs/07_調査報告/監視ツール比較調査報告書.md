# 監視ツール比較調査報告書
**Datadog / CloudWatch / Hinemos 監視・アラート機能詳細比較**

---

## 1. エグゼクティブサマリー

本報告書は、Datadog、AWS CloudWatch、Hinemos の3つの監視ツールにおける監視・アラート機能を詳細に比較し、特に**複雑な条件設定の可否**を明確化することを目的とする。

### 主要な調査結果

- **Datadog**: 最大10個の Monitor を Boolean 演算（AND/OR/NOT）で組み合わせる Composite Monitor、機械学習ベースの Anomaly Detection、Outlier Detection、Forecast Alert など、最も高度な監視機能を提供
- **AWS CloudWatch**: Metric Math による算術・論理演算、Anomaly Detection、Composite Alarm（複数アラームの Boolean 演算）をサポート。ただし Composite Alarm では EC2 Actions / Auto Scaling Actions が使用不可などの制限あり
- **Hinemos**: 相関係数監視、収集値統合監視、通知抑制・フィルタリング、ジョブ連携による自動復旧など、エンタープライズ運用に特化した機能を提供。OSS ベースでオンプレミス環境に強み

### 推奨

- **クラウドネイティブ環境**でリッチな可観測性が必要な場合: **Datadog**
- **AWS 環境**でコスト効率重視の場合: **AWS CloudWatch**
- **オンプレミス環境**またはマルチベンダー混在環境: **Hinemos**

---

## 2. 調査目的

### 背景

マルチテナント環境において、以下のような複雑な監視要件が求められる:

1. **複合条件による監視**: 複数のメトリクス・ログを組み合わせた条件判定
2. **異常検知**: 過去データから正常範囲を学習し、異常を自動検知
3. **通知抑制**: インフラ障害時にアプリケーションアラートを抑制（親子関係）
4. **運用自動化**: 障害検知時に自動復旧ジョブを実行

### 調査目的

各ツールの以下の機能を詳細に比較し、実装可能性を評価する:

- Monitor/Alarm タイプの種類
- 複合条件（Composite）対応
- 異常検知（機械学習/統計）
- 通知・アクション
- 運用自動化

---

## 3. 比較観点

| 観点 | 評価項目 |
|------|---------|
| **Monitor/Alarm タイプ** | 監視対象の種類（メトリクス、ログ、APM、Synthetic など） |
| **複合条件対応** | 複数の Monitor/Alarm を Boolean 演算で組み合わせる機能 |
| **異常検知** | 機械学習・統計による正常範囲の自動算出 |
| **通知・アクション** | 通知先、アクション種別、柔軟性 |
| **運用自動化** | 障害検知時の自動復旧、ジョブ連携 |
| **スケーラビリティ** | 大規模環境（マルチテナント）への対応 |
| **コスト** | ライセンス形態、従量課金の有無 |

---

## 4. コスト・ROI分析

### 4.1 コスト比較

| ツール | 初期費用 | 月額費用（目安） | 課金モデル |
|--------|----------|------------------|------------|
| **Datadog** | なし | ¥2,000〜/ホスト | ホスト + メトリクス + ログ量 |
| **CloudWatch** | なし | 従量課金 | メトリクス数 + API呼び出し + ログ量 |
| **Hinemos** | ライセンス費 | 保守費 | サブスクリプション |

### 4.2 ROI観点での評価

| 観点 | Datadog | CloudWatch | Hinemos |
|------|---------|------------|---------|
| **障害対応時間短縮** | 高（APM相関分析） | 中 | 中 |
| **運用工数削減** | 高（SaaS） | 低（自前構築） | 中 |
| **学習コスト** | 中 | 低（AWS知識活用） | 高 |
| **スケーラビリティ** | 高（自動） | 高（AWSに依存） | 低 |

### 4.3 導入判断マトリクス

| 条件 | 推奨ツール |
|------|-----------|
| AWSメインで低コスト重視 | CloudWatch |
| マルチクラウド + 分析重視 | Datadog |
| オンプレミス + カスタマイズ重視 | Hinemos |
| 少人数チーム + 迅速な導入 | Datadog |

---

## 5. 詳細比較表

### 5.1 Monitor/Alarm タイプ

| ツール | Monitor/Alarm タイプ | 説明 |
|--------|---------------------|------|
| **Datadog** | Metric Monitor | しきい値、変化量、異常検知、外れ値、予測 |
| | Composite Monitor | **最大10個の Monitor を Boolean 演算（&&, ||, !）で組み合わせ** |
| | Anomaly Detection | 過去データから正常範囲を学習、時間帯・曜日パターン対応 |
| | Outlier Detection | グループ内で異なる挙動を検知 |
| | Forecast Alert | 将来値を予測し threshold と比較 |
| | Log Monitor | ログカウント、ファセット値監視 |
| | APM Monitor | hits, errors, latency |
| | SLO Alert | エラーバジェット消費率、バーンレート |
| | その他 | Audit Trail, CI/CD, Cloud Cost, Database, Error Tracking, Event, Network, Process, RUM, Synthetic, Watchdog |
| **CloudWatch** | Metric Alarm | 単一メトリクスのしきい値監視 |
| | Metric Math | 算術演算、比較演算、論理演算をメトリクスに適用可能 |
| | Anomaly Detection | `ANOMALY_DETECTION_BAND` 関数で正常範囲を算出、上/下/両方の逸脱を検知 |
| | Composite Alarm | 複数アラームを Boolean 演算で組み合わせ |
| **Hinemos** | リソース監視 | CPU、メモリ、ディスク、ネットワーク（数値） |
| | プロセス監視 | プロセス起動/停止監視 |
| | ログ監視 | 文字列パターンマッチング |
| | SNMP 監視 | SNMP トラップ監視 |
| | HTTP 監視 | HTTP レスポンス監視 |
| | SQL 監視 | データベースクエリ監視 |
| | カスタム監視 | スクリプトによる任意の監視 |
| | 相関係数監視 | **複数メトリクス間の相関を監視** |
| | 収集値統合監視 | **複数収集値を統合して監視** |

### 5.2 複合条件（Composite）対応

| ツール | 機能 | 詳細 | 制限事項 |
|--------|------|------|---------|
| **Datadog** | Composite Monitor | - 最大10個の Monitor を組み合わせ<br>- Boolean 演算: `&&` (AND), `||` (OR), `!` (NOT)<br>- ネスト可能<br>- **例**: `(monitor_A && monitor_B) || !monitor_C` | - 10個を超える Monitor は組み合わせ不可 |
| **CloudWatch** | Composite Alarm | - 複数の Alarm を Boolean 演算で組み合わせ<br>- `AND`, `OR`, `NOT` サポート<br>- クロスリージョン対応 | - **EC2 Actions / Auto Scaling Actions 不可**<br>- クロスアカウント Composite 不可<br>- SNS 通知、Systems Manager アクションのみ |
| **Hinemos** | 収集値統合監視 | - 複数の収集値を統合して監視<br>- 演算: 加算、減算、乗算、除算 | - Boolean 演算（AND/OR）の明確なサポートは確認できず |
| | メッセージフィルタ | - ルールベースで通知を抑制・集約<br>- 正規表現パターンマッチング | - Monitor 自体の組み合わせではなく、通知レベルでのフィルタリング |

### 5.3 異常検知（機械学習/統計）

| ツール | 機能 | アルゴリズム | 詳細 |
|--------|------|-----------|------|
| **Datadog** | Anomaly Detection | 機械学習（過去データから学習） | - 時間帯・曜日パターン対応<br>- Agile, Robust, Basic アルゴリズム選択可能<br>- 季節性・トレンド考慮 |
| | Outlier Detection | 統計（グループ内比較） | - 同一グループ内で異常な挙動を検知<br>- DBSCAN, MAD アルゴリズム |
| | Forecast Alert | 機械学習（予測） | - 将来値を予測し threshold と比較<br>- Linear, Seasonal アルゴリズム |
| **CloudWatch** | Anomaly Detection | 機械学習（過去データから学習） | - `ANOMALY_DETECTION_BAND` 関数<br>- 上/下/両方の逸脱を検知<br>- 最低2週間のデータ推奨 |
| **Hinemos** | 相関係数監視 | 統計（相関係数） | - 複数メトリクス間の相関を監視<br>- 正常時の相関パターンからの逸脱を検知 |

### 5.4 通知・アクション

| ツール | 通知先 | アクション種別 | 詳細 |
|--------|--------|-------------|------|
| **Datadog** | Email, Slack, PagerDuty, Webhook, など | - SNS 通知<br>- Incident 作成<br>- Notebook 作成<br>- Workflow 実行 | - 多数のインテグレーション<br>- `@mention` によるユーザー・チーム通知<br>- 通知メッセージのカスタマイズ |
| **CloudWatch** | SNS, EventBridge | - SNS 通知<br>- EC2 アクション（Stop, Terminate, Reboot, Recover）<br>- Auto Scaling アクション<br>- OpsItem/Incident 作成<br>- Investigation 開始 | - Composite Alarm では EC2/Auto Scaling アクション不可<br>- EventBridge 経由で Lambda など連携可能 |
| **Hinemos** | イベント通知, メール, ジョブ, コマンド, REST, ログエスカレーション | - **ジョブ通知**: 障害検知時に自動でジョブ実行<br>- コマンド通知: 任意のコマンド実行<br>- REST 通知: 外部 API 呼び出し | - **自動復旧**: ジョブ連携による自動復旧<br>- ステータス通知: 監視ステータスを他システムに通知 |

### 5.5 運用自動化

| ツール | 機能 | 詳細 |
|--------|------|------|
| **Datadog** | Workflow | - Monitor トリガーで Workflow 実行<br>- AWS, Azure, GCP, Slack, Jira など多数のアクション<br>- ビジュアルエディタで設計 |
| **CloudWatch** | EventBridge 連携 | - Alarm トリガーで Lambda, Step Functions, ECS Task など実行<br>- Systems Manager Automation によるランブック実行 |
| **Hinemos** | ジョブ連携 | - **障害検知時に自動でジョブ実行**（自動復旧）<br>- ジョブネット（複数ジョブの連鎖実行）<br>- リトライ、エラー処理 |

---

## 6. 総評

### 6.1 Datadog

**強み**:
- **最も高度な複合条件対応**: Composite Monitor で最大10個の Monitor を Boolean 演算で組み合わせ
- **リッチな異常検知**: Anomaly Detection, Outlier Detection, Forecast Alert
- **統合可観測性**: メトリクス、ログ、APM、RUM、Synthetic を一元管理
- **豊富なインテグレーション**: 500+ のインテグレーション

**弱み**:
- **コスト**: ホスト数・メトリクス数に応じた従量課金（高額になりやすい）
- **ベンダーロックイン**: Datadog 独自の仕様・API

**適用シーン**:
- クラウドネイティブアプリケーション（Kubernetes, Serverless）
- DevOps/SRE チームによる高度な可観測性が必要な環境
- マルチクラウド環境（AWS, Azure, GCP）

### 6.2 AWS CloudWatch

**強み**:
- **AWS ネイティブ**: AWS サービスとの深い統合
- **コスト効率**: 基本的な監視は無料枠あり、比較的安価
- **Composite Alarm**: 複数アラームの Boolean 演算サポート
- **Anomaly Detection**: 機械学習ベースの異常検知

**弱み**:
- **Composite Alarm の制限**: EC2 Actions / Auto Scaling Actions 不可
- **クロスアカウント Composite 不可**: マルチアカウント環境での制約
- **ログ分析の弱さ**: CloudWatch Logs Insights はあるが、Datadog Log Analytics に比べると機能が限定的

**適用シーン**:
- AWS 単一クラウド環境
- コスト重視のプロジェクト
- 基本的な監視要件（しきい値監視、異常検知）

### 6.3 Hinemos

**強み**:
- **オンプレミス/マルチベンダー対応**: OSS ベース、幅広い環境に対応
- **自動復旧**: ジョブ連携による障害自動復旧
- **エンタープライズ運用**: 相関係数監視、通知抑制、エスカレーション
- **コスト**: OSS 版は無料（商用サポート版は有償）

**弱み**:
- **クラウドネイティブ機能の弱さ**: Kubernetes, Serverless の監視は Datadog/CloudWatch に劣る
- **UI/UX**: Datadog に比べると UI が古い
- **学習コスト**: 設定が複雑、習熟に時間が必要

**適用シーン**:
- オンプレミス環境
- マルチベンダー混在環境（VMware, Linux, Windows, ネットワーク機器）
- エンタープライズ運用（ITIL プロセス準拠）

---

## 7. 選定ガイドライン

### 7.1 SLO/SLI設計との連携

| ツール | SLO設計サポート | エラーバジェット管理 |
|--------|-----------------|---------------------|
| **Datadog** | SLO機能あり（標準） | ダッシュボード統合 |
| **CloudWatch** | Application Insights | 手動構築が必要 |
| **Hinemos** | カスタム実装 | 手動構築が必要 |

**推奨**: SLO駆動の監視設計を行う場合、Datadog の SLO 機能が最も省力化できる。

### 7.2 Runbook連携

| ツール | 連携方式 | 自動化レベル |
|--------|----------|--------------|
| **Datadog** | Workflow Automation | 高（Webhook + API） |
| **CloudWatch** | EventBridge + Systems Manager | 高（AWS統合） |
| **Hinemos** | ジョブ連携 | 高（自動復旧） |

**推奨**:
- AWS環境での自動復旧: CloudWatch + Systems Manager Automation
- マルチクラウド環境: Datadog Workflow Automation
- オンプレミス環境: Hinemos ジョブ連携

---

## 8. Sources（参照URL）

### Datadog

- [Composite Monitor](https://docs.datadoghq.com/monitors/types/composite/)
- [Anomaly Monitor](https://docs.datadoghq.com/monitors/types/anomaly/)
- [Monitor Types](https://docs.datadoghq.com/monitors/types/)
- [Outlier Monitor](https://docs.datadoghq.com/monitors/types/outlier/)
- [Forecast Monitor](https://docs.datadoghq.com/monitors/types/forecasts/)

### AWS CloudWatch

- [Anomaly Detection](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Anomaly_Detection.html)
- [Metric Math](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html)
- [Composite Alarms](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Create_Composite_Alarm.html)
- [Alarm Actions](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html)

### Hinemos

- [監視機能](https://www.hinemos.info/feature/monitorandperformance)
- [通知機能](https://atomitech.jp/hinemos/study/common/notice/)
- [相関係数監視](https://www.hinemos.info/technology/correlation)
- [ジョブ連携](https://www.hinemos.info/feature/job)

---

**作成日**: 2026-01-01
**作成者**: PM (Claude Sonnet 4.5)
**バージョン**: 1.0
