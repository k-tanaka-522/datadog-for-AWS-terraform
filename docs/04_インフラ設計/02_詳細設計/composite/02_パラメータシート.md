# composite モジュール パラメータシート

## 1. 概要

このドキュメントは、composite モジュールで使用するパラメータの定義を記載します。

---

## 2. アラート抑制ルール

### 2.1 抑制ロジック

| Composite Monitor | 抑制条件 | 説明 |
|------------------|---------|------|
| L0-Composite | なし | 常にアラート |
| L2-Composite | L0-Composite が ALERT時 | L0障害中はL2アラート抑制 |
| L3-Composite | L0-Composite または L2-Composite が ALERT時 | L0/L2障害中はL3アラート抑制 |

### 2.2 論理式

| Composite Monitor | 論理式 |
|------------------|--------|
| L0-Composite | `L0-RDS-CPU \|\| L0-RDS-Conn \|\| L0-RDS-Mem \|\| L0-RDS-Storage \|\| L0-ECS-Tasks \|\| L0-VPC-Flow \|\| L0-Agent` |
| L2-Composite | `(L2-ALB-Health \|\| L2-ECS-Task \|\| L2-ECR-Vuln) && NOT L0-Composite` |
| L3-Composite（tenant-a） | `(L3-Health-tenant-a \|\| L3-Error-tenant-a \|\| L3-Latency-tenant-a) && NOT L0-Composite && NOT L2-Composite` |

---

## 3. 通知先パラメータ

### 3.1 通知チャネル定義

| Composite Monitor | 通知先 | 対応者 | 緊急度 |
|------------------|-------|-------|--------|
| L0-Composite | `@slack-ops-alerts-critical`<br/>`@pagerduty-infra-team` | インフラチーム（24/7） | Critical |
| L2-Composite | `@slack-ops-alerts-high`<br/>`@app-team@example.com` | アプリケーションチーム | High |
| L3-Composite | `@slack-tenant-alerts`<br/>`@dev-team@example.com` | 開発チーム | Medium |

---

## 4. タグパラメータ

### 4.1 自動付与タグ

| タグキー | タグ値 | 説明 |
|---------|-------|------|
| `layer` | `l0` / `l2` / `l3` | 監視階層 |
| `composite` | `true` | Composite Monitor 識別 |
| `severity` | `critical` / `high` / `medium` | アラートの重要度 |
| `tenant` | `${tenant_id}` | テナント識別子（L3のみ） |

---

## 5. 関連ドキュメント

| ドキュメント | パス |
|------------|------|
| モジュール詳細設計 | [01_モジュール詳細設計.md](01_モジュール詳細設計.md) |
| 構築手順書 | [03_構築手順書.md](03_構築手順書.md) |

---

**作成日**: 2025-12-28
**作成者**: Infra-Architect
**バージョン**: 1.0
**ステータス**: Draft
